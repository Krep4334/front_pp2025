# API Эндпоинты FoodExpress

## Основные эндпоинты приложения

### Рестораны

#### `GET /api/restaurants`
Получить список всех ресторанов
- **Ответ**: Массив объектов ресторанов
- **Параметры**: 
  - `?city` - фильтр по городу
  - `?rating` - минимальный рейтинг
  - `?category` - категория кухни

#### `GET /api/restaurants/:id`
Получить информацию о конкретном ресторане
- **Параметры**: `id` - ID ресторана
- **Ответ**: Объект ресторана с полной информацией

#### `GET /api/restaurants/:id/menu`
Получить меню ресторана
- **Параметры**: `id` - ID ресторана
- **Ответ**: Массив блюд ресторана

#### `GET /api/restaurants/:id/orders`
Получить заказы конкретного ресторана
- **Параметры**: 
  - `id` - ID ресторана
  - `?status` - фильтр по статусу (pending, preparing, ready, delivering, completed)
  - `?date` - фильтр по дате
- **Ответ**: Массив заказов

#### `POST /api/restaurants/:id/dishes`
Добавить новое блюдо в меню ресторана
- **Параметры**: `id` - ID ресторана
- **Тело запроса**: 
  ```json
  {
    "name": "Название блюда",
    "description": "Описание",
    "price": 599,
    "category": "Пицца",
    "ingredients": ["ингредиент1", "ингредиент2"],
    "weight": 450,
    "calories": 850,
    "image": "url изображения"
  }
  ```

#### `PUT /api/restaurants/:id/dishes/:dishId`
Обновить информацию о блюде
- **Параметры**: 
  - `id` - ID ресторана
  - `dishId` - ID блюда
- **Тело запроса**: Объект с полями для обновления

#### `DELETE /api/restaurants/:id/dishes/:dishId`
Удалить блюдо из меню
- **Параметры**: 
  - `id` - ID ресторана
  - `dishId` - ID блюда

---

### Блюда

#### `GET /api/dishes`
Получить список всех блюд
- **Параметры**:
  - `?category` - фильтр по категории
  - `?restaurantId` - фильтр по ресторану
  - `?minPrice` - минимальная цена
  - `?maxPrice` - максимальная цена
  - `?search` - поиск по названию/описанию
- **Ответ**: Массив блюд

#### `GET /api/dishes/:id`
Получить информацию о конкретном блюде
- **Параметры**: `id` - ID блюда
- **Ответ**: Объект блюда с полной информацией

---

### Заказы

#### `POST /api/orders`
Создать новый заказ
- **Тело запроса**:
  ```json
  {
    "restaurantId": "rest1",
    "items": [
      {
        "dishId": "1",
        "quantity": 2,
        "price": 599
      }
    ],
    "customer": {
      "name": "Иван Петров",
      "phone": "+7 (999) 123-45-67",
      "address": "Москва, Тверская ул., 1, кв. 10"
    },
    "paymentMethod": "card",
    "comment": "Комментарий к заказу"
  }
  ```
- **Ответ**: Объект созданного заказа с ID

#### `GET /api/orders`
Получить список заказов
- **Параметры**:
  - `?status` - фильтр по статусу
  - `?restaurantId` - фильтр по ресторану
  - `?customerId` - фильтр по клиенту
  - `?dateFrom` - дата начала периода
  - `?dateTo` - дата конца периода
- **Ответ**: Массив заказов

#### `GET /api/orders/:id`
Получить информацию о конкретном заказе
- **Параметры**: `id` - ID заказа
- **Ответ**: Объект заказа с полной информацией

#### `PUT /api/orders/:id/status`
Изменить статус заказа
- **Параметры**: `id` - ID заказа
- **Тело запроса**:
  ```json
  {
    "status": "preparing" // pending, preparing, ready, delivering, completed, cancelled
  }
  ```

#### `PUT /api/orders/:id`
Обновить информацию о заказе
- **Параметры**: `id` - ID заказа
- **Тело запроса**: Объект с полями для обновления

#### `DELETE /api/orders/:id`
Отменить заказ
- **Параметры**: `id` - ID заказа

---

### Категории

#### `GET /api/categories`
Получить список всех категорий блюд
- **Ответ**: Массив категорий
- **Пример ответа**:
  ```json
  [
    "Пицца",
    "Бургеры",
    "Суши",
    "Паста",
    "Салаты",
    "Супы",
    "Мясо",
    "Выпечка"
  ]
  ```

---

### Статистика (для ресторанов)

#### `GET /api/restaurants/:id/stats`
Получить статистику ресторана
- **Параметры**: 
  - `id` - ID ресторана
  - `?period` - период (day, week, month, year)
  - `?dateFrom` - дата начала
  - `?dateTo` - дата конца
- **Ответ**:
  ```json
  {
    "totalOrders": 1247,
    "todayOrders": 23,
    "totalRevenue": 1250000,
    "todayRevenue": 45000,
    "averageOrder": 3500,
    "popularDishes": [...],
    "activeCustomers": 342
  }
  ```

#### `GET /api/restaurants/:id/stats/popular-dishes`
Получить популярные блюда ресторана
- **Параметры**: 
  - `id` - ID ресторана
  - `?limit` - количество блюд (по умолчанию 10)
  - `?period` - период

---

### Корзина (клиентская сторона)

#### `GET /api/cart`
Получить текущую корзину пользователя
- **Ответ**: Массив товаров в корзине

#### `POST /api/cart`
Добавить блюдо в корзину
- **Тело запроса**:
  ```json
  {
    "dishId": "1",
    "quantity": 1
  }
  ```

#### `PUT /api/cart/:dishId`
Изменить количество блюда в корзине
- **Параметры**: `dishId` - ID блюда
- **Тело запроса**:
  ```json
  {
    "quantity": 2
  }
  ```

#### `DELETE /api/cart/:dishId`
Удалить блюдо из корзины
- **Параметры**: `dishId` - ID блюда

#### `DELETE /api/cart`
Очистить корзину

---

## Статусы заказов

- `pending` - Ожидает обработки
- `preparing` - Готовится
- `ready` - Готов к выдаче
- `delivering` - Доставляется
- `completed` - Завершен
- `cancelled` - Отменен

---

## Коды ответов

- `200` - Успешный запрос
- `201` - Ресурс создан
- `400` - Неверный запрос
- `401` - Не авторизован
- `403` - Доступ запрещен
- `404` - Ресурс не найден
- `500` - Внутренняя ошибка сервера

